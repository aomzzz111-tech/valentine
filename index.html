<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Happy Valentineü§ç</title>

<style>
body{
    margin:0;
    font-family:'Segoe UI',sans-serif;
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
    background:#ffe6f0;
    overflow:hidden;
}
.page{ display:none; width:360px; text-align:center; padding:30px; }
.active{ display:block; }

.box{
    background:white;
    padding:25px;
    border-radius:20px;
    box-shadow:0 8px 25px rgba(0,0,0,0.15);
    animation:fadeIn 0.5s ease;
}

.pink-box{
    background:#fff0f6;
    padding:25px;
    border-radius:20px;
    border:2px solid #ffc2d6;
    animation:fadeIn 0.5s ease;
}

button{
    padding:12px 20px;
    border:none;
    border-radius:25px;
    cursor:pointer;
    margin-top:15px;
    font-size:16px;
    background:#ff6b9e;
    color:white;
    transition:0.3s;
}
button:hover{ transform:scale(1.05); }

@keyframes fadeIn{
    from{opacity:0; transform:translateY(15px);}
    to{opacity:1; transform:translateY(0);}
}

.scratch-container{ position:relative; width:100%; margin:15px 0; }
.real-image{ width:100%; border-radius:15px; }
#scratch{
    position:absolute;
    top:0;
    left:0;
    width:100%;
    height:100%;
    border-radius:15px;
    touch-action:none;
    z-index:5;
}


.btn-box{ position:relative; height:120px; }
.yes-btn{ position:absolute; left:20%; }
.no-btn{ position:absolute; left:55%; background:#999; }

.popup{
    position:fixed;
    top:0; left:0;
    width:100%; height:100%;
    background:rgba(0,0,0,0.4);
    display:none;
    justify-content:center;
    align-items:center;
}
.popup-box{
    background:white;
    padding:30px;
    border-radius:20px;
    text-align:center;
    width:280px;
    animation:pop 0.4s ease;
}
@keyframes pop{
    from{transform:scale(0.6); opacity:0;}
    to{transform:scale(1); opacity:1;}
}

.final-screen{
    position:fixed;
    top:0;
    left:0;
    width:100%;
    height:100%;
    background:linear-gradient(135deg,#ffd1dc,#ffe6f0);
    display:none;
    justify-content:center;
    align-items:center;
    text-align:center;
    z-index:1000;
}

.final-text{
    background:white;
    padding:30px 25px;
    border-radius:25px;
    max-width:320px;
    width:90%;
    font-size:18px;
    line-height:1.6;
    box-shadow:0 10px 30px rgba(0,0,0,0.15);
    text-align:center;
    animation:fadeIn 0.6s ease;
}


.petal{
    position:fixed;
    top:-20px;
    font-size:20px;
    animation:fall linear forwards;
    pointer-events:none;
    z-index:999;
}

@keyframes fall{
    to{
        transform:translateY(110vh) rotate(360deg);
        opacity:0.8;
    }
}

/* ===== Emoji Floating ===== */

body{
    margin:0;
    overflow:hidden;
    background:linear-gradient(135deg,#ffd6e8,#fff0f6);
}

.heart-bg{
    position:fixed;
    bottom:0;
    left:0;
    width:100%;
    height:100%;
    pointer-events:none;
    z-index:-1;
}

.heart{
    position:absolute;
    bottom:-50px;
    font-size:24px;
    animation: floatUp linear forwards;
}

@keyframes floatUp{
    0%{
        transform:translateY(0) scale(1);
        opacity:1;
    }
    100%{
        transform:translateY(-110vh) scale(1.8);
        opacity:0;
    }
}
    
</style>
</head>

<body>
<div class="heart-bg" id="heartBg"></div>
<div id="page1" class="page active">
    
<div class="box">
<h2>ü§çHappyValentine‚ÄôsDayü§ç</h2>
<p>‡∏û‡∏µ‡πà‡∏ï‡∏Å‡πÉ‡∏à‡∏°‡∏±‡πâ‡∏¢? 55.ü§£</p>
<p>(‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏™‡∏∞‡∏î‡∏ß‡∏Å..‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡∏ô‡∏∞ ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏ö‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏î‡πâ‡∏ß‡∏¢ ‡∏°‡∏±‡∏ô‡∏°‡∏µ‡πÄ‡∏û‡∏•‡∏á)</p><button onclick="startValentine()">‡∏Å‡∏î‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡∏Å‡πà‡∏≠‡∏ôü§ç</button>
</div>
</div>

<div id="page2" class="page">
<div class="box">
<p><b>üòÖ‡∏´‡∏ô‡∏π‡∏°‡∏µ‡∏≠‡∏∞‡πÑ‡∏£‡∏≠‡∏¢‡∏≤‡∏Å‡πÉ‡∏´‡πâ‡∏û‡∏µ‡πà‡∏î‡∏π‚ÄºÔ∏è</b></p>

<div class="scratch-container">
<img id="realImage" src="S__19947524.jpg" width="100%" style="border-radius:15px;">
<canvas id="scratch"></canvas>
</div>

<p>‡∏Ç‡∏π‡∏î‡πÉ‡∏´‡πâ‡∏™‡∏∞‡∏≠‡∏≤‡∏î‡∏ô‡∏∞..</p>
</div>
</div>

<div class="popup" id="popup">
<div class="popup-box">
<p>ü§£‡∏¢‡∏¥‡πâ‡∏°‡∏°‡∏±‡πâ‡∏¢ Ai ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÑ‡∏î‡πâ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÅ‡∏Ñ‡πà‡∏ô‡∏¥‡πà 55.ü§£</p>
<button onclick="closePopup()">ü§´‡∏´‡∏ô‡∏π‡∏≠‡∏¢‡∏≤‡∏Å‡∏à‡∏∞‡∏ö‡∏≠‡∏Å‡∏û‡∏µ‡πà</button>
</div>
</div>

<div id="page3" class="page">
<div class="pink-box">
<p><b>‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏û‡∏µ‡πà‡∏ô‡∏∞ ‡∏ó‡∏µ‡πà‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏Ñ‡∏∏‡∏¢‡∏Å‡∏∞‡∏´‡∏ô‡∏π‡πÉ‡∏ô‡∏ß‡∏±‡∏ô‡∏ô‡∏±‡πâ‡∏ôüåª</b></p>
<p style="font-size:14px;">
ü§ç‡∏´‡∏ô‡∏π‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡∏û‡∏µ‡πà‡πÑ‡∏°‡πà‡∏´‡∏≤‡∏¢‡πÑ‡∏õ‡∏à‡∏≤‡∏Å‡∏´‡∏ô‡∏π ‡πÑ‡∏°‡πà‡∏ó‡∏¥‡πâ‡∏á‡∏´‡∏ô‡∏π ‡πÑ‡∏°‡πà‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏±‡∏ö‡∏´‡∏ô‡∏π ‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏±‡∏Å‡∏´‡∏ô‡∏π‡πÄ‡∏¢‡∏≠‡∏∞‡πÜ ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏°‡∏±‡πâ‡∏¢?!
‡πÄ‡∏•‡∏¥‡∏Å‡∏Ñ‡∏¥‡∏î‡πÅ‡∏ö‡∏ö‡∏ó‡∏µ‡πà‡∏û‡∏µ‡πà‡∏Ñ‡∏¥‡∏î‡∏≠‡∏¢‡∏π‡πà‡πÑ‡∏î‡πâ‡πÅ‡∏•‡πâ‡∏ß ‡∏û‡∏µ‡πà‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏´‡πá‡∏ô‡πÅ‡∏Å‡πà‡∏ï‡∏±‡∏ß ‡∏´‡∏ô‡∏π‡πÑ‡∏°‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏∞‡πÑ‡∏£‡πÄ‡∏•‡∏¢ ‡∏´‡∏ô‡∏π‡∏£‡∏±‡∏Å‡∏û‡∏µ‡πà‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß ‡πÅ‡∏ö‡∏ö‡πÄ‡∏ï‡πá‡∏°‡∏´‡∏±‡∏ß‡πÉ‡∏à ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡∏≤‡∏Å‡∏à‡∏∞‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏£‡πâ‡∏≠‡∏á‡∏≠‡∏∞‡πÑ‡∏£‡∏à‡∏≤‡∏Å‡∏û‡∏µ‡πà ‡∏ô‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏ô‡πÉ‡∏à ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏™‡πà‡πÉ‡∏à ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏ó‡∏¥‡πâ‡∏á‡∏Ç‡∏ß‡πâ‡∏≤‡∏á‡∏´‡∏ô‡∏π 
‡∏´‡∏ô‡∏π‡∏°‡∏µ‡∏û‡∏µ‡πà‡∏°‡∏±‡∏ô‡∏î‡∏µ‡∏°‡∏≤‡∏Å‡πÜ‡πÅ‡∏•‡πâ‡∏ß ‡∏≠‡∏¢‡πà‡∏≤‡πÉ‡∏´‡πâ‡∏´‡∏ô‡∏π‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏•‡∏±‡∏ß‡∏ß‡πà‡∏≤‡∏û‡∏µ‡πà‡∏à‡∏∞‡∏ó‡∏¥‡πâ‡∏á‡∏´‡∏ô‡∏π‡πÄ‡∏•‡∏¢‡∏ô‡∏∞
‡∏û‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏±‡∏Å‡∏´‡∏ô‡∏π‡πÄ‡∏¢‡∏≠‡∏∞‡πÜ ‡∏´‡πâ‡∏≤‡∏°‡πÄ‡∏à‡πâ‡∏≤‡∏ä‡∏π‡πâüò°‡∏ô‡∏∞‡∏Ñ‡∏∞
</p>
<p><b>üßîüèª‡∏Ñ‡∏ô‡πÅ‡∏Å‡πà‡∏Ç‡∏≠‡∏á‡∏´‡∏ô‡∏πü§ç</b></p>
<button onclick="nextPage(4)">üòè‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏´‡∏ô‡∏π‡∏≠‡∏¢‡∏≤‡∏Å‡∏à‡∏∞‡∏ñ‡∏≤‡∏°</button>
</div>
</div>

<div id="page4" class="page">
<div class="box">
<h3>‡∏û‡∏µ‡πà‡∏à‡∏∞‡∏£‡∏±‡∏Å‡∏´‡∏ô‡∏π‡πÄ‡∏¢‡∏≠‡∏∞‡πÜ‡πÑ‡∏î‡πâ‡∏°‡∏±‡πâ‡∏¢‡∏ô‡∏∞?üôÇ </h3>
<div class="btn-box">
<button class="yes-btn" onclick="yesAnswer()">‡∏£‡∏±‡∏Å‡πÄ‡∏¢‡∏≠‡∏∞ü§ç </button>
<button class="no-btn" onmouseover="moveNo()" ontouchstart="moveNo()">‡πÑ‡∏°‡πà‡∏£‡∏±‡∏Å‡πÅ‡∏•‡πâ‡∏ßüòú </button>
</div>
</div>
</div>

  
<div id="finalScreen" class="final-screen">
    <div class="final-text">
    <h3 style="margin-top:0;">üåª ‡∏´‡∏ô‡∏π‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡∏û‡∏µ‡πà üòù</h3>

    <p>
        ‡∏´‡∏ô‡∏π‡∏Å‡∏∞‡∏£‡∏±‡∏Å‡∏û‡∏µ‡πà‡πÄ‡∏¢‡∏≠‡∏∞‡∏™‡∏∏‡∏î‡∏ô‡∏∞ ü§ç
    </p>

    <p style="font-size:14px; opacity:0.8;">
        (‡πÄ‡∏Ç‡∏¥‡∏•‡πÑ‡∏î‡πâ‡∏¢‡∏±‡∏á? ‡∏´‡∏ô‡∏π‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏à‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î 2 ‡∏ß‡∏±‡∏ô‡πÄ‡∏•‡∏¢‡∏ô‡∏∞ ü§£)
    </p>

    <button onclick="goHome()">‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å ü§ç</button>
</div>

</div>

<audio id="bgmusic" loop>
<source src="music.mp3" type="audio/mpeg">
</audio>

<script>

const music=document.getElementById("bgmusic");
music.volume=0.3;

function startValentine(){

popupShown=false;   // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï popup
scale=1;            // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏õ‡∏∏‡πà‡∏° No

music.play();
music.currentTime=0;

nextPage(2);

// ‡∏£‡∏≠‡πÉ‡∏´‡πâ‡∏£‡∏π‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏Å‡πà‡∏≠‡∏ô ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏≠‡∏¢‡πÄ‡∏£‡∏¥‡πà‡∏° scratch
const img = document.getElementById("realImage");

if (img.complete) {
    initScratch();
} else {
    img.onload = function() {
        initScratch();
    };
}


function nextPage(num){
document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));
document.getElementById("page"+num).classList.add("active");
}

function showPopup(){ document.getElementById("popup").style.display="flex"; }

function closePopup(){
document.getElementById("popup").style.display="none";
nextPage(3);
}

function yesAnswer(){
document.getElementById("finalScreen").style.display="flex";
music.volume=0.5;
}


function stopPetals(){
    clearInterval(petalInterval);
}
    
function goHome(){
    document.getElementById("finalScreen").style.display="none";
    nextPage(1);
    music.pause();        // ‡∏´‡∏¢‡∏∏‡∏î‡πÄ‡∏û‡∏•‡∏á
    music.currentTime=0;  // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏û‡∏•‡∏á
    music.volume=0.3;
    stopPetals();         // ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏Å‡∏•‡∏µ‡∏ö
}
    
let scale=1;
function moveNo(){
const noBtn=document.querySelector(".no-btn");
const box=document.querySelector(".btn-box");
const maxX=box.clientWidth-noBtn.clientWidth;
const maxY=box.clientHeight-noBtn.clientHeight;
noBtn.style.left=Math.random()*maxX+"px";
noBtn.style.top=Math.random()*maxY+"px";
scale-=0.1;
if(scale<0.3) scale=0.3;
noBtn.style.transform="scale("+scale+")";
}

const canvas=document.getElementById("scratch");
const ctx=canvas.getContext("2d");
const container=document.querySelector(".scratch-container");

function initScratch(){
    canvas.width = container.offsetWidth;
    canvas.height = container.offsetHeight;

    ctx.clearRect(0,0,canvas.width,canvas.height);  // ‡∏•‡πâ‡∏≤‡∏á‡∏Å‡πà‡∏≠‡∏ô

    ctx.fillStyle="#ff99bb";
    ctx.fillRect(0,0,canvas.width,canvas.height);
    ctx.globalCompositeOperation="destination-out";
}

let isDrawing=false;
let popupShown=false;

function scratch(e){
if(!isDrawing) return;
const rect=canvas.getBoundingClientRect();
const x=(e.touches?e.touches[0].clientX:e.clientX)-rect.left;
const y=(e.touches?e.touches[0].clientY:e.clientY)-rect.top;
ctx.beginPath();
ctx.arc(x,y,20,0,Math.PI*2);
ctx.fill();
checkProgress();
}

function checkProgress(){
if(popupShown) return;
const pixels=ctx.getImageData(0,0,canvas.width,canvas.height);
let transparent=0;
for(let i=3;i<pixels.data.length;i+=4){
if(pixels.data[i]===0) transparent++;
}
let percent=transparent/(pixels.data.length/4);
if(percent>0.8){
popupShown=true;
showPopup();
}
}

canvas.addEventListener("touchstart",(e)=>{
  e.preventDefault();
  isDrawing=true;
});

canvas.addEventListener("touchend",(e)=>{
  e.preventDefault();
  isDrawing=false;
});

canvas.addEventListener("touchmove",(e)=>{
  e.preventDefault();
  scratch(e);
});

canvas.addEventListener("mousedown",()=> isDrawing=true);
canvas.addEventListener("mouseup",()=> isDrawing=false);
canvas.addEventListener("mousemove",scratch);
    
</script>

<script>
const heartBg = document.getElementById("heartBg");

const emojis = ["ü§ç","ü©∑","üíõ","üåª"];

function createHeart(){
    const heart = document.createElement("div");
    heart.classList.add("heart");

    heart.innerText = emojis[Math.floor(Math.random() * emojis.length)];
    heart.style.left = Math.random() * 100 + "vw";
    heart.style.fontSize = (Math.random() * 20 + 20) + "px";
    heart.style.animationDuration = (Math.random() * 3 + 4) + "s";

    heartBg.appendChild(heart);

    setTimeout(()=>{
        heart.remove();
    },7000);
}

setInterval(createHeart, 400);
</script>   
    
</body>
</html>
