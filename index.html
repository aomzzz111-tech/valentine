<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>For You ‚ù§Ô∏è</title>
<style>
body{
  margin:0;
  font-family:sans-serif;
  background:linear-gradient(#ffd6e7,#ffeef5);
  text-align:center;
}

.card{
  background:white;
  width:90%;
  max-width:400px;
  margin:40px auto;
  padding:20px;
  border-radius:20px;
  box-shadow:0 10px 30px rgba(0,0,0,0.15);
}

canvas{
  border-radius:15px;
}

.hidden{
  display:none;
}

button{
  padding:12px 20px;
  border:none;
  border-radius:25px;
  font-size:16px;
  cursor:pointer;
}

.yes{
  background:#ff5c8a;
  color:white;
}

.no{
  background:#999;
  color:white;
  position:absolute;
}

.popup{
  position:fixed;
  top:0;left:0;
  width:100%;height:100%;
  background:rgba(0,0,0,0.4);
  display:flex;
  justify-content:center;
  align-items:center;
}

.popup-box{
  background:white;
  padding:25px;
  border-radius:20px;
  width:80%;
  max-width:300px;
}
</style>
</head>
<body>

<audio autoplay loop>
  <source src="music.mp3" type="audio/mpeg">
</audio>

<div class="card" id="page1">
  <h3>üòÅ ‡∏´‡∏ô‡∏π‡∏°‡∏µ‡∏≠‡∏∞‡πÑ‡∏£‡∏≠‡∏¢‡∏≤‡∏Å‡πÉ‡∏´‡πâ‡∏û‡∏µ‡πà‡∏û‡∏π‡∏î!!</h3>

  <div style="position:relative;">
    <img id="realImage" src="yourphoto.jpg" width="100%" style="border-radius:15px;">
    <canvas id="scratch"></canvas>
  </div>

  <p>‡∏Ç‡∏π‡∏î‡πÉ‡∏´‡πâ‡∏™‡∏∞‡∏≠‡∏≤‡∏î‡∏ô‡∏∞..</p>

  <button id="nextBtn" class="hidden" onclick="goPage2()">‡∏û‡∏µ‡πà! ‡∏´‡∏ô‡∏π‡∏≠‡∏¢‡∏≤‡∏Å‡∏ñ‡∏≤‡∏°</button>
</div>

<div class="popup hidden" id="page2">
  <div class="popup-box">
    <h3>‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ü‡∏ô‡∏Å‡∏±‡∏ô‡πÑ‡∏´‡∏° üíï</h3>
    <br>
    <button class="yes" onclick="love()">YES</button>
    <button class="no" id="noBtn">NO</button>
  </div>
</div>

<script>
const canvas = document.getElementById("scratch");
const img = document.getElementById("realImage");
const ctx = canvas.getContext("2d");
const nextBtn = document.getElementById("nextBtn");

canvas.width = img.offsetWidth;
canvas.height = img.offsetHeight;
canvas.style.position="absolute";
canvas.style.left="0";
canvas.style.top="0";

ctx.fillStyle="#bbb";
ctx.fillRect(0,0,canvas.width,canvas.height);

ctx.globalCompositeOperation="destination-out";

let isDrawing=false;

function getXY(e){
  const rect=canvas.getBoundingClientRect();
  if(e.touches){
    return {
      x:e.touches[0].clientX-rect.left,
      y:e.touches[0].clientY-rect.top
    }
  }else{
    return {
      x:e.clientX-rect.left,
      y:e.clientY-rect.top
    }
  }
}

function scratch(e){
  if(!isDrawing) return;
  const pos=getXY(e);
  ctx.beginPath();
  ctx.arc(pos.x,pos.y,20,0,Math.PI*2);
  ctx.fill();
  checkProgress();
}

canvas.addEventListener("mousedown",()=>isDrawing=true);
canvas.addEventListener("mouseup",()=>isDrawing=false);
canvas.addEventListener("mousemove",scratch);

canvas.addEventListener("touchstart",(e)=>{isDrawing=true;});
canvas.addEventListener("touchend",()=>isDrawing=false);
canvas.addEventListener("touchmove",(e)=>{
  scratch(e);
});

function checkProgress(){
  const pixels=ctx.getImageData(0,0,canvas.width,canvas.height);
  let cleared=0;
  for(let i=3;i<pixels.data.length;i+=4){
    if(pixels.data[i]==0) cleared++;
  }
  const percent=cleared/(canvas.width*canvas.height)*100;
  if(percent>80){
    canvas.remove();
    nextBtn.classList.remove("hidden");
  }
}

function goPage2(){
  document.getElementById("page1").classList.add("hidden");
  document.getElementById("page2").classList.remove("hidden");
}

function love(){
  alert("‡∏£‡∏±‡∏Å‡∏û‡∏µ‡πà‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÄ‡∏•‡∏¢ üíñ");
}

const noBtn=document.getElementById("noBtn");
noBtn.addEventListener("mouseover",moveNo);
noBtn.addEventListener("touchstart",moveNo);

function moveNo(){
  const x=Math.random()*200;
  const y=Math.random()*200;
  noBtn.style.left=x+"px";
  noBtn.style.top=y+"px";
  noBtn.style.transform="scale(0.8)";
}
</script>

</body>
</html>
